<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sampurna IT Support Chatbot - Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        code, pre {
            font-family: 'JetBrains Mono', monospace;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .section-card {
            transition: all 0.3s ease;
        }
        
        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .nav-link {
            transition: all 0.3s ease;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: #667eea;
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .folder-icon {
            transition: transform 0.3s ease;
        }
        
        .folder-item:hover .folder-icon {
            transform: rotate(10deg);
        }
        
        .code-block {
            background: #1e1e1e;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .mermaid {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .scroll-smooth {
            scroll-behavior: smooth;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 0;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #667eea;
            border: 3px solid #1f2937;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 scroll-smooth">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass-effect">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-robot text-3xl text-purple-400"></i>
                    <span class="text-xl font-bold gradient-text">Sampurna IT Support</span>
                </div>
                <div class="hidden md:flex space-x-6">
                    <a href="#overview" class="nav-link text-gray-300 hover:text-white">Overview</a>
                    <a href="#architecture" class="nav-link text-gray-300 hover:text-white">Architecture</a>
                    <a href="#tech-stack" class="nav-link text-gray-300 hover:text-white">Tech Stack</a>
                    <a href="#backend" class="nav-link text-gray-300 hover:text-white">Backend</a>
                    <a href="#frontend" class="nav-link text-gray-300 hover:text-white">Frontend</a>
                    <a href="#deployment" class="nav-link text-gray-300 hover:text-white">Deployment</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="gradient-bg pt-32 pb-20 px-4">
        <div class="max-w-7xl mx-auto text-center">
            <div class="inline-block mb-4">
                <span class="badge bg-purple-500 text-white">Enterprise-Grade Solution</span>
            </div>
            <h1 class="text-5xl md:text-6xl font-extrabold mb-6">
                Sampurna IT Support Chatbot
            </h1>
            <p class="text-xl md:text-2xl text-purple-100 mb-8 max-w-3xl mx-auto">
                Agentic RAG System with Autonomous AI Agent for Enterprise IT Support
            </p>
            <div class="flex flex-wrap justify-center gap-4">
                <span class="badge bg-white text-purple-600"><i class="fas fa-brain mr-2"></i>Powered by Gemini 2.0</span>
                <span class="badge bg-white text-purple-600"><i class="fas fa-network-wired mr-2"></i>LAN Deployed</span>
                <span class="badge bg-white text-purple-600"><i class="fas fa-language mr-2"></i>Multi-Language</span>
                <span class="badge bg-white text-purple-600"><i class="fas fa-bolt mr-2"></i>Streamlit UI</span>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Executive Summary -->
        <section id="overview" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-file-alt text-purple-400 mr-3"></i>
                    Executive Summary
                </h2>
                <p class="text-lg text-gray-300 leading-relaxed mb-4">
                    The Sampurna IT Support Chatbot is an enterprise-grade, <strong class="text-purple-400">Agentic RAG (Retrieval-Augmented Generation)</strong> application. Unlike standard chatbots that simply predict text, this system employs an autonomous AI Agent capable of planning, searching proprietary company documents, analyzing findings, and synthesizing context-aware responses in multiple languages.
                </p>
                <p class="text-lg text-gray-300 leading-relaxed">
                    The system is designed for <strong class="text-purple-400">LAN deployment</strong> with a <strong class="text-purple-400">Streamlit-powered frontend</strong>, allowing employees across the office network to interact with the central server via a modern, Python-native web interface running on the same machine as the backend.
                </p>
            </div>
        </section>

        <!-- Architecture -->
        <section id="architecture" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-project-diagram text-purple-400 mr-3"></i>
                    System Architecture
                </h2>
                <p class="text-gray-300 mb-6">
                    The application follows a <strong class="text-purple-400">Streamlit + FastAPI Architecture</strong> with both frontend and backend running on the same server, augmented by an Agentic AI Orchestrator.
                </p>
                
                <!-- High-Level Data Flow -->
                <h3 class="text-2xl font-semibold mb-4 text-purple-300">High-Level Data Flow</h3>
                <div class="mermaid">
graph TD
    User((User<br/>LAN Device)) -->|1. Browser Access<br/>Port 8501| Streamlit[Streamlit Frontend<br/>app.py]
    Streamlit -->|2. HTTP POST<br/>127.0.0.1:8000| FastAPI[FastAPI Backend<br/>main.py]
    
    subgraph Server["Same Server (127.0.0.1)"]
        Streamlit
        FastAPI
    end
    
    subgraph Brain["AI Intelligence Layer"]
        FastAPI -->|3. Initialize| Crew[CrewAI Orchestrator]
        Crew -->|4. Wake Up| Agent[IT Support Agent]
        
        subgraph ReAct["Agentic ReAct Loop"]
            Agent -->|5. Think| Gemini[Gemini 2.0 Flash Lite]
            Gemini -->|6. Decision| Decision{Need Info?}
            Decision -->|Yes| Tool[SearchITDocsTool]
            Decision -->|No| Answer[Synthesize Response]
        end
        
        Tool -->|7. Vector Query| VectorDB[(ChromaDB)]
        VectorDB -->|8. Context Chunks| Tool
    end
    
    Answer -->|9. Final Answer| FastAPI
    FastAPI -->|10. JSON Response| Streamlit
    Streamlit -->|11. Render UI| User

    style User fill:#667eea,stroke:#764ba2,stroke-width:3px,color:#fff
    style Streamlit fill:#ff4b4b,stroke:#ff0000,stroke-width:2px,color:#fff
    style FastAPI fill:#009688,stroke:#00695c,stroke-width:2px,color:#fff
    style Agent fill:#ec4899,stroke:#db2777,stroke-width:2px,color:#fff
    style VectorDB fill:#8b5cf6,stroke:#7c3aed,stroke-width:2px,color:#fff
    style Server fill:#f0f0f0,stroke:#999,stroke-width:2px
    style Brain fill:#f0f0f0,stroke:#999,stroke-width:2px
                </div>

                <!-- Connection Architecture -->
                <h3 class="text-2xl font-semibold mb-4 mt-8 text-purple-300">Frontend-Backend Connection</h3>
                <div class="bg-gray-700 rounded-lg p-6 mb-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-green-300 mb-3 flex items-center">
                                <i class="fab fa-python mr-2"></i>
                                Streamlit Frontend (Port 8501)
                            </h4>
                            <ul class="text-gray-300 text-sm space-y-2">
                                <li>‚Ä¢ Runs on: <code class="bg-gray-900 px-2 py-1 rounded">0.0.0.0:8501</code></li>
                                <li>‚Ä¢ Accessible via LAN: <code class="bg-gray-900 px-2 py-1 rounded">http://SERVER_IP:8501</code></li>
                                <li>‚Ä¢ Session state management for chat history</li>
                                <li>‚Ä¢ Built-in chat interface components</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-blue-300 mb-3 flex items-center">
                                <i class="fas fa-server mr-2"></i>
                                FastAPI Backend (Port 8000)
                            </h4>
                            <ul class="text-gray-300 text-sm space-y-2">
                                <li>‚Ä¢ Runs on: <code class="bg-gray-900 px-2 py-1 rounded">0.0.0.0:8000</code></li>
                                <li>‚Ä¢ Streamlit connects to: <code class="bg-gray-900 px-2 py-1 rounded">127.0.0.1:8000</code></li>
                                <li>‚Ä¢ Handles AI agent orchestration</li>
                                <li>‚Ä¢ CORS enabled for flexibility</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- ReAct Loop Sequence -->
                <h3 class="text-2xl font-semibold mb-4 mt-8 text-purple-300">The ReAct Loop - Step-by-Step Execution</h3>
                <div class="mermaid">
sequenceDiagram
    participant User
    participant Streamlit
    participant FastAPI
    participant Agent
    participant Tool
    participant DB

    User->>Streamlit: Types question in chat
    Streamlit->>FastAPI: POST /ask {question, history}
    FastAPI->>Agent: Initialize with context
    
    loop Reasoning Cycle
        Agent->>Agent: Thought: Need external info
        Agent->>Tool: Call SearchITDocs("deadline")
        Tool->>DB: Vector Similarity Search
        DB->>Tool: Return matching chunks
        Tool->>Agent: Observation: "3rd working day..."
        Agent->>Agent: Thought: Answer found
    end
    
    Agent->>FastAPI: Return final answer
    FastAPI->>Streamlit: JSON response
    Streamlit->>User: Display in chat UI
                </div>
            </div>
        </section>

        <!-- Technology Stack -->
        <section id="tech-stack" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-layer-group text-purple-400 mr-3"></i>
                    Technology Stack
                </h2>
                <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="border-b border-gray-700">
                                <th class="pb-3 text-purple-300">Component</th>
                                <th class="pb-3 text-purple-300">Technology</th>
                                <th class="pb-3 text-purple-300">Version</th>
                                <th class="pb-3 text-purple-300">Purpose</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-300">
                            <tr class="border-b border-gray-700"><td class="py-3">Frontend Framework</td><td class="font-semibold">Streamlit</td><td>Latest</td><td>Python-native web UI framework</td></tr>
                            <tr class="border-b border-gray-700"><td class="py-3">UI Components</td><td class="font-semibold">Streamlit Chat</td><td>Built-in</td><td>Chat interface, message display</td></tr>
                            <tr class="border-b border-gray-700"><td class="py-3">HTTP Client</td><td class="font-semibold">Requests</td><td>Latest</td><td>Backend communication</td></tr>
                            <tr class="border-b border-gray-700"><td class="py-3">Backend Framework</td><td class="font-semibold">FastAPI</td><td>Latest</td><td>High-performance Python API</td></tr>
                            <tr class="border-b border-gray-700"><td class="py-3">AI Orchestrator</td><td class="font-semibold">CrewAI</td><td>Latest</td><td>Autonomous agent framework</td></tr>
                            <tr class="border-b border-gray-700"><td class="py-3">LLM Intelligence</td><td class="font-semibold">Google Gemini</td><td>2.0 Flash Lite</td><td>Cost-effective AI reasoning</td></tr>
                            <tr class="border-b border-gray-700"><td class="py-3">Vector Database</td><td class="font-semibold">ChromaDB</td><td>Latest</td><td>Document embeddings storage</td></tr>
                            <tr><td class="py-3">Host OS</td><td class="font-semibold">Ubuntu Linux</td><td>24.04 LTS</td><td>Deployment environment</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-6 bg-blue-900 bg-opacity-20 border border-blue-500 rounded-lg p-4">
                    <h4 class="font-semibold text-blue-300 mb-2 flex items-center">
                        <i class="fas fa-lightbulb mr-2"></i>
                        Why Streamlit?
                    </h4>
                    <ul class="text-gray-300 text-sm space-y-1">
                        <li>‚Ä¢ <strong>Rapid Development:</strong> Python-only stack, no separate frontend codebase</li>
                        <li>‚Ä¢ <strong>Built-in Components:</strong> Native chat interface, file downloads, session state</li>
                        <li>‚Ä¢ <strong>Same Server Deployment:</strong> Frontend and backend run together on localhost</li>
                        <li>‚Ä¢ <strong>Auto-Refresh:</strong> UI updates automatically when state changes</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Backend Design -->
        <section id="backend" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-server text-purple-400 mr-3"></i>
                    Backend Design (main.py)
                </h2>
                
                <h3 class="text-2xl font-semibold mb-4 text-purple-300">API Configuration & CORS</h3>
                <div class="code-block mb-6">
                    <div class="bg-gray-700 px-4 py-2 flex items-center justify-between">
                        <span class="text-sm text-gray-300">backend/main.py</span>
                        <span class="text-xs text-purple-400">Python</span>
                    </div>
                    <pre class="p-4 text-sm overflow-x-auto"><code>app = FastAPI(title="Sampurna IT Support Chatbot")

# CORS Middleware - Allows Streamlit (and other clients) to connect
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # Accept from any origin (LAN safe)
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)</code></pre>
                </div>

                <h3 class="text-2xl font-semibold mb-4 text-purple-300">Input Validation (Pydantic)</h3>
                <div class="code-block mb-6">
                    <div class="bg-gray-700 px-4 py-2">
                        <span class="text-sm text-gray-300">Request Schema</span>
                    </div>
                    <pre class="p-4 text-sm overflow-x-auto"><code>class QueryRequest(BaseModel):
    question: str                      # User's current input
    chat_history: Optional[List[str]] = [] # Previous messages</code></pre>
                </div>

                <h3 class="text-2xl font-semibold mb-4 text-purple-300">The Intelligence Core: get_crew_response()</h3>
                <div class="space-y-4">
                    <div class="bg-gray-700 rounded-lg p-6">
                        <h4 class="font-semibold text-lg mb-3 text-purple-300">1. Memory Management (Sliding Window)</h4>
                        <div class="code-block">
                            <pre class="p-4 text-sm overflow-x-auto"><code>context_str = "\n".join(history[-20:]) if history else "No previous context."</code></pre>
                        </div>
                        <p class="text-gray-300 mt-3 text-sm">Maintains last 20 messages for contextual awareness while optimizing token usage</p>
                    </div>

                    <div class="bg-gray-700 rounded-lg p-6">
                        <h4 class="font-semibold text-lg mb-3 text-purple-300">2. Agent Definition (The "Persona")</h4>
                        <div class="code-block">
                            <pre class="p-4 text-sm overflow-x-auto"><code>support_agent = Agent(
    role='Adaptive IT Support Specialist',
    goal='Provide accurate, helpful answers by searching the database.',
    backstory="""
        YOUR RULES:
        1. ALWAYS SEARCH: Use SearchITDocsTool for every question
        2. LANGUAGE: Detect and match user's query language
        3. IGNORE HISTORY LANGUAGE: Prioritize current question
        4. BE HELPFUL: Provide general IT advice if policy not found
        5. FORMATTING: Use bullet points for clarity
    """,
    llm=my_llm,
    tools=[search_tool]
)</code></pre>
                        </div>
                        <p class="text-gray-300 mt-3 text-sm">Backstory engineering prevents context bias and hallucination</p>
                    </div>

                    <div class="bg-gray-700 rounded-lg p-6">
                        <h4 class="font-semibold text-lg mb-3 text-purple-300">3. Task Definition & Execution</h4>
                        <div class="code-block">
                            <pre class="p-4 text-sm overflow-x-auto"><code>answer_task = Task(
    description=f"""
        CONTEXT: {context_str}
        QUESTION: "{user_question}"
        
        1. Use SearchITDocsTool
        2. Read results carefully
        3. Answer in user's language
        4. Output ONLY final answer
    """,
    agent=support_agent
)

# Execute
result = tech_crew.kickoff()</code></pre>
                        </div>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold mb-4 mt-8 text-purple-300">API Endpoint</h3>
                <div class="code-block">
                    <div class="bg-gray-700 px-4 py-2">
                        <span class="text-sm text-gray-300">POST /ask</span>
                    </div>
                    <pre class="p-4 text-sm overflow-x-auto"><code>@app.post("/ask")
async def ask_question(request: QueryRequest):
    try:
        result_object = get_crew_response(
            request.question, 
            request.chat_history
        )
        return {"answer": result_object.raw}
    except Exception as e:
        return {"answer": "Experiencing high traffic. Please retry."}</code></pre>
                </div>
            </div>
        </section>

        <!-- Frontend Design -->
        <section id="frontend" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-desktop text-purple-400 mr-3"></i>
                    Frontend Design (app.py)
                </h2>
                
                <h3 class="text-2xl font-semibold mb-4 text-purple-300">Streamlit Configuration</h3>
                <div class="code-block mb-6">
                    <div class="bg-gray-700 px-4 py-2">
                        <span class="text-sm text-gray-300">app.py - Setup</span>
                    </div>
                    <pre class="p-4 text-sm overflow-x-auto"><code>BACKEND_URL = "http://127.0.0.1:8000/ask"  # Localhost connection

st.set_page_config(
    page_title="Sampurna IT Support",
    page_icon="ü§ñ",
    layout="centered"
)</code></pre>
                </div>

                <h3 class="text-2xl font-semibold mb-4 text-purple-300">Session State Management</h3>
                <div class="bg-gray-700 rounded-lg p-6 mb-6">
                    <p class="text-gray-300 mb-3">Streamlit uses <code class="bg-gray-900 px-2 py-1 rounded">st.session_state</code> for persistent data across reruns:</p>
                    <div class="code-block">
                        <pre class="p-4 text-sm overflow-x-auto"><code>if "messages" not in st.session_state:
    st.session_state.messages = [
        {"role": "assistant", "content": "Hello! I am Sampurna IT Support..."}
    ]</code></pre>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold mb-4 text-purple-300">Backend Communication</h3>
                <div class="code-block mb-6">
                    <div class="bg-gray-700 px-4 py-2">
                        <span class="text-sm text-gray-300">API Call Logic</span>
                    </div>
                    <pre class="p-4 text-sm overflow-x-auto"><code>if prompt := st.chat_input("Ask a question..."):
    # Add user message
    st.session_state.messages.append({"role": "user", "content": prompt})
    
    with st.chat_message("assistant"):
        with st.spinner("Thinking..."):
            # Prepare last 5 messages for context
            history_list = [
                f"{m['role']}: {m['content']}" 
                for m in st.session_state.messages[-5:]
            ]
            
            # POST to backend
            response = requests.post(BACKEND_URL, json={
                "question": prompt,
                "chat_history": history_list
            })
            
            answer = response.json().get("answer")
            st.markdown(answer)
            st.session_state.messages.append({"role": "assistant", "content": answer})</code></pre>
                </div>

                <h3 class="text-2xl font-semibold mb-4 text-purple-300">Key Features Implementation</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-gray-700 rounded-lg p-4">
                        <i class="fas fa-download text-purple-400 text-2xl mb-2"></i>
                        <h4 class="font-semibold mb-2">Chat Download</h4>
                        <p class="text-sm text-gray-300 mb-2">Sidebar button to export conversation:</p>
                        <div class="code-block">
                            <pre class="p-2 text-xs overflow-x-auto"><code>st.download_button(
    label="üì• Download Chat",
    data=chat_str,
    file_name=f"chat_{datetime.now()}.txt"
)</code></pre>
                        </div>
                    </div>
                    <div class="bg-gray-700 rounded-lg p-4">
                        <i class="fas fa-trash text-purple-400 text-2xl mb-2"></i>
                        <h4 class="font-semibold mb-2">Clear Chat</h4>
                        <p class="text-sm text-gray-300 mb-2">Reset conversation history:</p>
                        <div class="code-block">
                            <pre class="p-2 text-xs overflow-x-auto"><code>if st.button("üóëÔ∏è Clear Chat"):
    st.session_state.messages = []
    st.rerun()</code></pre>
                        </div>
                    </div>
                </div>

                <div class="mt-6 bg-green-900 bg-opacity-20 border border-green-500 rounded-lg p-4">
                    <h4 class="font-semibold text-green-300 mb-2 flex items-center">
                        <i class="fas fa-check-circle mr-2"></i>
                        Streamlit Advantages
                    </h4>
                    <ul class="text-gray-300 text-sm space-y-1">
                        <li>‚úì <strong>Native Chat UI:</strong> <code>st.chat_message()</code> and <code>st.chat_input()</code></li>
                        <li>‚úì <strong>Auto-Refresh:</strong> State changes trigger automatic UI updates</li>
                        <li>‚úì <strong>Built-in Widgets:</strong> Spinners, download buttons, file uploads</li>
                        <li>‚úì <strong>Python-Only:</strong> No JavaScript, HTML, or CSS required</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Project Structure -->
        <section id="structure" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-folder-tree text-purple-400 mr-3"></i>
                    Project Structure
                </h2>
                <div class="bg-gray-900 rounded-lg p-6 font-mono text-sm">
                    <div class="folder-item flex items-center mb-2">
                        <i class="fas fa-folder folder-icon text-yellow-400 mr-2"></i>
                        <span class="text-purple-300 font-semibold">sampurna_bot/</span>
                    </div>
                    <div class="ml-6">
                        <div class="folder-item flex items-center mb-2">
                            <i class="fas fa-folder folder-icon text-yellow-400 mr-2"></i>
                            <span class="text-purple-300 font-semibold">backend/</span>
                        </div>
                        <div class="ml-6">
                            <div class="flex items-center mb-1">
                                <i class="fas fa-file-code text-blue-400 mr-2"></i>
                                <span>main.py</span>
                                <span class="ml-2 text-xs text-gray-500"># FastAPI + CrewAI Logic</span>
                            </div>
                            <div class="flex items-center mb-1">
                                <i class="fas fa-file-code text-blue-400 mr-2"></i>
                                <span>db_tool.py</span>
                                <span class="ml-2 text-xs text-gray-500"># Vector DB Search Tool</span>
                            </div>
                            <div class="flex items-center mb-2">
                                <i class="fas fa-file-code text-blue-400 mr-2"></i>
                                <span>__init__.py</span>
                            </div>
                        </div>
                        
                        <div class="folder-item flex items-center mb-2">
                            <i class="fas fa-folder folder-icon text-yellow-400 mr-2"></i>
                            <span class="text-purple-300 font-semibold">database/</span>
                            <span class="ml-2 text-xs text-gray-500"># ChromaDB storage</span>
                        </div>
                        
                        <div class="flex items-center mb-2">
                            <i class="fab fa-python text-cyan-400 mr-2"></i>
                            <span class="text-green-300 font-semibold">app.py</span>
                            <span class="ml-2 text-xs text-gray-500"># Streamlit Frontend (Main Entry)</span>
                        </div>
                        
                        <div class="folder-item flex items-center mb-2">
                            <i class="fas fa-folder folder-icon text-yellow-400 mr-2"></i>
                            <span class="text-purple-300 font-semibold">venv/</span>
                            <span class="ml-2 text-xs text-gray-500"># Python Virtual Environment</span>
                        </div>
                        
                        <div class="flex items-center mb-1">
                            <i class="fas fa-file-alt text-gray-400 mr-2"></i>
                            <span>requirements.txt</span>
                            <span class="ml-2 text-xs text-gray-500"># Python Dependencies</span>
                        </div>
                        
                        <div class="flex items-center mb-1">
                            <i class="fas fa-file-csv text-green-400 mr-2"></i>
                            <span>documents.csv</span>
                            <span class="ml-2 text-xs text-gray-500"># IT Policy Documents</span>
                        </div>
                        
                        <div class="flex items-center mb-1">
                            <i class="fas fa-file-code text-purple-400 mr-2"></i>
                            <span>*.py</span>
                            <span class="ml-2 text-xs text-gray-500"># Utility scripts (seed_db, etc.)</span>
                        </div>
                    </div>
                </div>

                <div class="mt-6 bg-yellow-900 bg-opacity-20 border border-yellow-500 rounded-lg p-4">
                    <h4 class="font-semibold text-yellow-300 mb-2 flex items-center">
                        <i class="fas fa-info-circle mr-2"></i>
                        Key Difference from React Version
                    </h4>
                    <p class="text-gray-300 text-sm">
                        <strong>No separate "frontend" folder!</strong> The Streamlit app (<code>app.py</code>) lives in the root directory alongside the backend. Both components run on the same server with different ports (8501 for Streamlit, 8000 for FastAPI).
                    </p>
                </div>
            </div>
        </section>

        <!-- Network Architecture -->
        <section id="network" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-network-wired text-purple-400 mr-3"></i>
                    Network & Deployment Architecture
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-gradient-to-br from-purple-800 to-purple-900 rounded-lg p-6">
                        <h4 class="font-semibold text-purple-200 mb-3 flex items-center">
                            <i class="fas fa-server mr-2"></i>
                            Server-Side (Localhost)
                        </h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-start">
                                <i class="fas fa-bolt text-yellow-300 mr-2 mt-1"></i>
                                <div>
                                    <p class="font-semibold">FastAPI Backend</p>
                                    <code class="text-xs bg-black bg-opacity-30 px-2 py-1 rounded">uvicorn main:app --host 0.0.0.0 --port 8000</code>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <i class="fab fa-python text-blue-300 mr-2 mt-1"></i>
                                <div>
                                    <p class="font-semibold">Streamlit Frontend</p>
                                    <code class="text-xs bg-black bg-opacity-30 px-2 py-1 rounded">streamlit run app.py --server.address 0.0.0.0 --server.port 8501</code>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-br from-blue-800 to-blue-900 rounded-lg p-6">
                        <h4 class="font-semibold text-blue-200 mb-3 flex items-center">
                            <i class="fas fa-network-wired mr-2"></i>
                            Client Access (LAN)
                        </h4>
                        <div class="space-y-2 text-sm">
                            <div>
                                <p class="font-semibold mb-1">From Host Machine:</p>
                                <code class="text-xs bg-black bg-opacity-30 px-2 py-1 rounded block">http://localhost:8501</code>
                            </div>
                            <div>
                                <p class="font-semibold mb-1">From Other LAN Devices:</p>
                                <code class="text-xs bg-black bg-opacity-30 px-2 py-1 rounded block">http://SERVER_IP:8501</code>
                                <p class="text-xs text-gray-300 mt-1">Replace SERVER_IP with actual server IP (e.g., 172.16.1.53)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold mb-4 text-purple-300">Communication Flow</h3>
                <div class="mermaid">
graph LR
    LAN[LAN Client<br/>172.16.1.100] -->|Browser Access| Streamlit[Streamlit UI<br/>SERVER_IP:8501]
    Streamlit -->|HTTP POST| Backend[FastAPI<br/>127.0.0.1:8000]
    Backend -->|Response| Streamlit
    Streamlit -->|Render| LAN

    style LAN fill:#4ade80,stroke:#22c55e,stroke-width:2px,color:#000
    style Streamlit fill:#ff4b4b,stroke:#ff0000,stroke-width:2px,color:#fff
    style Backend fill:#009688,stroke:#00695c,stroke-width:2px,color:#fff
                </div>

                <div class="mt-6 space-y-4">
                    <div class="bg-gray-700 rounded-lg p-5">
                        <h4 class="font-semibold text-green-300 mb-2 flex items-center">
                            <i class="fas fa-check-circle mr-2"></i>
                            Why 127.0.0.1 for Backend Connection?
                        </h4>
                        <p class="text-gray-300 text-sm">
                            Streamlit and FastAPI run on the <strong>same physical server</strong>. Streamlit uses <code>127.0.0.1:8000</code> (localhost) to connect to FastAPI because they're both running locally. External users only need to access Streamlit on port 8501.
                        </p>
                    </div>
                    
                    <div class="bg-gray-700 rounded-lg p-5">
                        <h4 class="font-semibold text-blue-300 mb-2 flex items-center">
                            <i class="fas fa-shield-alt mr-2"></i>
                            Firewall Configuration
                        </h4>
                        <div class="code-block">
                            <pre class="p-3 text-sm"><code>sudo ufw allow 8501  # Streamlit
sudo ufw allow 8000  # FastAPI (optional, if external access needed)</code></pre>
                        </div>
                        <p class="text-gray-300 text-sm mt-2">
                            Only port 8501 needs to be exposed for LAN access. Port 8000 can remain localhost-only.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Deployment Guide -->
        <section id="deployment" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-rocket text-purple-400 mr-3"></i>
                    Deployment Guide
                </h2>
                
                <div class="space-y-6">
                    <div class="bg-gray-700 rounded-lg p-6">
                        <h3 class="text-xl font-semibold text-purple-300 mb-4 flex items-center">
                            <span class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3">1</span>
                            Start the FastAPI Backend
                        </h3>
                        <div class="code-block">
                            <div class="bg-gray-600 px-4 py-2">
                                <span class="text-sm text-gray-300">Terminal 1</span>
                            </div>
                            <pre class="p-4 text-sm overflow-x-auto"><code>cd ~/sampurna_bot
source venv/bin/activate
uvicorn backend.main:app --host 0.0.0.0 --port 8000</code></pre>
                        </div>
                        <p class="text-gray-300 mt-3 text-sm flex items-center">
                            <i class="fas fa-info-circle text-blue-400 mr-2"></i>
                            Backend will be available at http://0.0.0.0:8000
                        </p>
                    </div>
                    
                    <div class="bg-gray-700 rounded-lg p-6">
                        <h3 class="text-xl font-semibold text-purple-300 mb-4 flex items-center">
                            <span class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3">2</span>
                            Start the Streamlit Frontend
                        </h3>
                        <div class="code-block">
                            <div class="bg-gray-600 px-4 py-2">
                                <span class="text-sm text-gray-300">Terminal 2</span>
                            </div>
                            <pre class="p-4 text-sm overflow-x-auto"><code>cd ~/sampurna_bot
source venv/bin/activate
streamlit run app.py --server.address 0.0.0.0 --server.port 8501</code></pre>
                        </div>
                        <p class="text-gray-300 mt-3 text-sm flex items-center">
                            <i class="fas fa-info-circle text-blue-400 mr-2"></i>
                            Streamlit will launch and show the local/network URLs
                        </p>
                    </div>
                    
                    <div class="bg-gray-700 rounded-lg p-6">
                        <h3 class="text-xl font-semibold text-purple-300 mb-4 flex items-center">
                            <span class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3">3</span>
                            Access the Application
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-gray-600 rounded p-4">
                                <h4 class="font-semibold text-green-300 mb-2 flex items-center">
                                    <i class="fas fa-laptop mr-2"></i>
                                    Host Machine
                                </h4>
                                <div class="code-block">
                                    <pre class="p-2 text-sm"><code>http://localhost:8501</code></pre>
                                </div>
                            </div>
                            <div class="bg-gray-600 rounded p-4">
                                <h4 class="font-semibold text-blue-300 mb-2 flex items-center">
                                    <i class="fas fa-network-wired mr-2"></i>
                                    Office Network (LAN)
                                </h4>
                                <div class="code-block">
                                    <pre class="p-2 text-sm"><code>http://172.16.1.53:8501</code></pre>
                                </div>
                                <p class="text-xs text-gray-300 mt-2">Replace with your server's actual IP</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-green-900 to-green-800 rounded-lg p-6">
                        <h4 class="font-semibold text-green-200 mb-3 flex items-center">
                            <i class="fas fa-terminal mr-2"></i>
                            Quick Start Script (Optional)
                        </h4>
                        <p class="text-gray-200 text-sm mb-3">Create a <code>start.sh</code> file to launch both services:</p>
                        <div class="code-block">
                            <pre class="p-3 text-sm"><code>#!/bin/bash
source venv/bin/activate

# Start backend in background
uvicorn backend.main:app --host 0.0.0.0 --port 8000 &

# Start frontend
streamlit run app.py --server.address 0.0.0.0 --server.port 8501</code></pre>
                        </div>
                        <p class="text-gray-200 text-sm mt-2">Run with: <code>chmod +x start.sh && ./start.sh</code></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- How ReAct Works -->
        <section id="react-details" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-brain text-purple-400 mr-3"></i>
                    Deep Dive: How the Agent "Thinks"
                </h2>
                
                <p class="text-gray-300 mb-6">
                    CrewAI implements the <strong class="text-purple-400">ReAct (Reasoning + Acting)</strong> paradigm. Here's a step-by-step breakdown when a user asks: <em>"What is the deadline?"</em>
                </p>
                
                <div class="space-y-4">
                    <div class="bg-gradient-to-r from-blue-900 to-blue-800 rounded-lg p-5 border-l-4 border-blue-400">
                        <h4 class="font-semibold text-blue-200 mb-2 flex items-center">
                            <i class="fas fa-eye mr-2"></i>
                            Step 1: Observation (Input)
                        </h4>
                        <p class="text-gray-200 text-sm">Agent receives User Query + Context History from Streamlit</p>
                        <p class="text-blue-100 text-sm italic mt-2">Internal Thought: "I don't have deadline information in my training. I should use SearchITDocs tool."</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-purple-900 to-purple-800 rounded-lg p-5 border-l-4 border-purple-400">
                        <h4 class="font-semibold text-purple-200 mb-2 flex items-center">
                            <i class="fas fa-tools mr-2"></i>
                            Step 2: Action (Tool Call)
                        </h4>
                        <p class="text-gray-200 text-sm">Agent constructs command:</p>
                        <div class="code-block mt-2">
                            <pre class="p-3 text-sm"><code>Action: SearchITDocs(query="asset declaration deadline")</code></pre>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-900 to-green-800 rounded-lg p-5 border-l-4 border-green-400">
                        <h4 class="font-semibold text-green-200 mb-2 flex items-center">
                            <i class="fas fa-database mr-2"></i>
                            Step 3: Tool Execution (RAG Retrieval)
                        </h4>
                        <ul class="text-gray-200 text-sm space-y-1">
                            <li>‚Ä¢ Converts query to vector (embeddings)</li>
                            <li>‚Ä¢ Queries ChromaDB for similar vectors</li>
                            <li>‚Ä¢ Retrieves: "Submission Timeline: ...by the 3rd working day..."</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gradient-to-r from-orange-900 to-orange-800 rounded-lg p-5 border-l-4 border-orange-400">
                        <h4 class="font-semibold text-orange-200 mb-2 flex items-center">
                            <i class="fas fa-lightbulb mr-2"></i>
                            Step 4: Reasoning (Synthesis)
                        </h4>
                        <p class="text-orange-100 text-sm italic">Internal Thought: "Found the text. User asked in English, so I'll answer in English. Answer should be direct."</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-pink-900 to-pink-800 rounded-lg p-5 border-l-4 border-pink-400">
                        <h4 class="font-semibold text-pink-200 mb-2 flex items-center">
                            <i class="fas fa-comment-dots mr-2"></i>
                            Step 5: Final Output
                        </h4>
                        <p class="text-gray-200 text-sm font-semibold">"The deadline is the 3rd working day of every month."</p>
                        <p class="text-pink-100 text-sm mt-2">Response sent back to Streamlit ‚Üí Displayed in chat UI</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Key Features Highlight -->
        <section id="features" class="mb-16">
            <div class="section-card bg-gray-800 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-star text-purple-400 mr-3"></i>
                    Key Features & Innovations
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-gradient-to-br from-purple-800 to-purple-900 rounded-xl p-6 section-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-purple-600 rounded-lg p-3 mr-4">
                                <i class="fas fa-language text-2xl text-white"></i>
                            </div>
                            <h3 class="text-xl font-semibold">Multi-Language Support</h3>
                        </div>
                        <p class="text-gray-200">Automatically detects and responds in the user's query language (English, Bengali, Hindi).</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-blue-800 to-blue-900 rounded-xl p-6 section-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-600 rounded-lg p-3 mr-4">
                                <i class="fas fa-memory text-2xl text-white"></i>
                            </div>
                            <h3 class="text-xl font-semibold">Context Memory</h3>
                        </div>
                        <p class="text-gray-200">Sliding window of last 20 messages maintains conversation flow.</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-red-800 to-red-900 rounded-xl p-6 section-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-red-600 rounded-lg p-3 mr-4">
                                <i class="fab fa-python text-2xl text-white"></i>
                            </div>
                            <h3 class="text-xl font-semibold">Pure Python Stack</h3>
                        </div>
                        <p class="text-gray-200">Streamlit eliminates need for separate frontend framework‚Äîeverything in Python.</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-green-800 to-green-900 rounded-xl p-6 section-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-green-600 rounded-lg p-3 mr-4">
                                <i class="fas fa-shield-alt text-2xl text-white"></i>
                            </div>
                            <h3 class="text-xl font-semibold">LAN Security</h3>
                        </div>
                        <p class="text-gray-200">Isolated network deployment ensures company data never leaves premises.</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-yellow-800 to-yellow-900 rounded-xl p-6 section-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-yellow-600 rounded-lg p-3 mr-4">
                                <i class="fas fa-robot text-2xl text-white"></i>
                            </div>
                            <h3 class="text-xl font-semibold">Autonomous Agent</h3>
                        </div>
                        <p class="text-gray-200">Self-directed AI that plans, searches, analyzes independently.</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-pink-800 to-pink-900 rounded-xl p-6 section-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-pink-600 rounded-lg p-3 mr-4">
                                <i class="fas fa-vector-square text-2xl text-white"></i>
                            </div>
                            <h3 class="text-xl font-semibold">RAG Architecture</h3>
                        </div>
                        <p class="text-gray-200">Vector database enables semantic search across proprietary documents.</p>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 border-t border-gray-800 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-3 gap-8 mb-8">
                <div>
                    <h4 class="font-semibold text-purple-300 mb-3 flex items-center">
                        <i class="fas fa-robot mr-2"></i>
                        About Sampurna
                    </h4>
                    <p class="text-gray-400 text-sm">Enterprise-grade Agentic RAG system for intelligent IT support, deployed on LAN with Streamlit frontend.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-purple-300 mb-3 flex items-center">
                        <i class="fas fa-code mr-2"></i>
                        Technologies
                    </h4>
                    <div class="flex flex-wrap gap-2">
                        <span class="badge bg-gray-700 text-purple-300">Streamlit</span>
                        <span class="badge bg-gray-700 text-purple-300">FastAPI</span>
                        <span class="badge bg-gray-700 text-purple-300">CrewAI</span>
                        <span class="badge bg-gray-700 text-purple-300">Gemini 2.0</span>
                        <span class="badge bg-gray-700 text-purple-300">ChromaDB</span>
                    </div>
                </div>
                <div>
                    <h4 class="font-semibold text-purple-300 mb-3 flex items-center">
                        <i class="fas fa-link mr-2"></i>
                        Quick Links
                    </h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#overview" class="text-gray-400 hover:text-purple-400 transition">Overview</a></li>
                        <li><a href="#architecture" class="text-gray-400 hover:text-purple-400 transition">Architecture</a></li>
                        <li><a href="#deployment" class="text-gray-400 hover:text-purple-400 transition">Deployment</a></li>
                        <li><a href="#features" class="text-gray-400 hover:text-purple-400 transition">Features</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-6 text-center">
                <p class="text-gray-500 text-sm">
                    Built with <i class="fas fa-heart text-red-500"></i> for Enterprise IT Support | 
                    <span class="text-purple-400">Sampurna IT Support Chatbot</span> ¬© 2025
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#e0e7ff',
                primaryTextColor: '#1e293b',
                primaryBorderColor: '#4f46e5',
                lineColor: '#6366f1',
                secondaryColor: '#c7d2fe',
                tertiaryColor: '#ddd6fe',
                background: '#ffffff',
                mainBkg: '#e0e7ff',
                secondBkg: '#ddd6fe',
                labelTextColor: '#1e293b',
                clusterBkg: '#f1f5f9',
                clusterBorder: '#64748b',
                edgeLabelBackground: '#ffffff',
                nodeTextColor: '#1e293b',
                titleColor: '#1e293b',
                textColor: '#1e293b'
            }
        });

        // Smooth scroll for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Active nav link on scroll
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollY >= (sectionTop - 100)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('text-purple-400');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('text-purple-400');
                }
            });
        });
    </script>
</body>
</html>
